/**
 * Date:Sun Nov 27 2016 17:17:12 GMT+0800 (中国标准时间)
 */
define(function(require,exports,module){exports.ready=function(){function t(t){this.ul=t.dom,this.sliderDot=t.sliderDot,this.autoPlay=t.autoPlay||!0,this.idx=0,this.interval=t.interval||3e3,this.scaleW=window.innerWidth,this.init(),this.autoPlay&&this.start()}$(function(){var t=$(".categoryList"),i=$(".book-category"),e=t.find("li"),s=i.width(),n=$(".slider-ul"),r=n.find("li"),o=r.length*r.eq(0).width();o+(r.length-1)*parseInt(r.eq(0).css("marginRight"),10);n.show(),e.each(function(){$(this).width(s)}),t.width(s*e.length).css("-webkit-transform","translate3d(0px, 0px, 0px)")}),t.prototype={div:null,transformName:"",transform:"",transition:"",transitionName:"",start:function(){this.clear();var t=this.getItems().length;t>1&&this.run()},clear:function(){clearInterval(this.slideTimer),this.slideTimer=null},run:function(){var t,i=this;this.slideTimer=setInterval(function(){t=i.getContext(i.idx).active,i.slide(parseInt(t,10)+1)},this.interval)},init:function(){this.getStyle(),this.bindEventForTouch(),this.bindEventForDot()},supportTransform3d:function(){return this.div=this.createDiv(),this.div.style[this.transform]="",this.div.style[this.transform]="rotateY(90deg)",""!==this.div.style[this.transform]},getStyle:function(){var t=this.checkDiffStyle("transform"),i=this.checkDiffStyle("transition");this.transform=t._cssProp,this.transformName=t._cssName,this.transition=i._cssProp,this.transitionName=i._cssName},createDiv:function(){return document.createElement("div")},checkDiffStyle:function(t){this.div=this.createDiv();for(var i=["Webkit","Moz","ms","O"],e=t.charAt(0).toUpperCase()+t.substr(1),s="",n=0;n<i.length;n++)if(s=i[n]+e,s in this.div.style)return{_cssProp:s,_cssName:"-"+i[n].toLowerCase()+"-"+t}},getAllIndex:function(){return this.ul.getElementsByTagName("li").length-1},getContext:function(t){var i,e,s=this.getAllIndex(),n=t;return n>s?n=0:n<0&&(n=s),this.idx=n,i=n-1<0?s:n-1,e=n+1>s?0:n+1,{active:n,next:e,prev:i}},getItems:function(){return this.ul.getElementsByTagName("li")},slide:function(t){var i=this.getContext(t),e=i.active,s=(i.prev,i.next,this.getItems(),this.transition),n=this.transform,r=this.transformName;this.ul.style[s]=r+" 0.4s ease-out",this.ul.style[n]="translate3d(-"+(this.scaleW-16)*e+"px, 0, 0)",this.slectDot(e),this.div=null},slectDot:function(t){var i=this.sliderDot.getElementsByTagName("li");$(i[t]).addClass("active").siblings().removeClass("active")},onTouchStart:function(t){var i=this.getItems().length;if(!(i<=1)){this.clear(),this.startTime=1*new Date,this.startX=t.touches[0].pageX,this.offsetX=0;for(var e=t.target;"LI"!=e.nodeName&&"BODY"!=e.nodeName;)e=e.parentNode;this.target=e}},onTouchMove:function(t){t.preventDefault();this.ul.getElementsByTagName("li");this.offsetX=t.touches[0].pageX-this.startX;var i=this.idx-1,e=this.transition,s=this.transform,n=this.transformName;this.ul.style[e]=n+" 0s ease-out",this.ul.style[s]="translate3d("+((i-this.idx)*this.scaleW+this.offsetX)+"px, 0, 0)"},onTouchEnd:function(t){var i=this.getItems().length;if(!(i<=1)){var e=this.scaleW/6,s=1*new Date;s-this.startTime>300?this.offsetX>=e?this.slide(this.idx-1):this.offsetX<0&&this.offsetX<-e?this.slide(this.idx+1):this.slide(0):this.offsetX>50?this.slide(this.idx-1):this.offsetX<-50?this.slide(this.idx+1):this.slide(0),this.reStartStatus()}},reStartStatus:function(){this.autoPlay&&this.start()},bindEventForTouch:function(){var t=this;this.ul.addEventListener("touchstart",function(i){t.onTouchStart(i)},!1),this.ul.addEventListener("touchmove",function(i){t.onTouchMove(i)},!1),this.ul.addEventListener("touchend",function(i){t.onTouchEnd(i)},!1)},bindEventForDot:function(){var t=this;$(this.sliderDot).on("mouseover","li",function(){t.clear()}).on("mouseout","li",function(){t.reStartStatus()}).on("click","li",function(){var i=$(this).index();t.slide(i)})}},new t({dom:document.getElementById("categoryList"),sliderDot:document.getElementById("sliderUl")})}});